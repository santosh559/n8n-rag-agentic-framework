# 1) Backup then remove the existing settings file
mv /home/codespace/.n8n/config /home/codespace/.n8n/config.bak

# 2) Generate a new key & set URLs
export N8N_ENCRYPTION_KEY=$(openssl rand -hex 16)
export N8N_PROTOCOL=https
export N8N_HOST=shocking-cobweb-97qx4v475546h97j-5678.app.github.dev
export N8N_PORT=5678
export WEBHOOK_URL="https://${N8N_HOST}"
export N8N_EDITOR_BASE_URL="https://${N8N_HOST}"
export N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true
export N8N_SECURE_COOKIE=false

# 3) Start n8n
npx -y n8n@latest
